<!DOCTYPE html>
<div style="padding: 10px;">
  <mat-card style="width: 100%;">
    <mat-card-content>
      <form>
        <fieldset>
          <legend>Role</legend>
          <mat-input-container style="width: 100%">
            <input matInput placeholder="Name" [(ngModel)]="role.name" name="name"
                   minlength="3" maxlength="100" required #name="ngModel" #input>
          </mat-input-container>
        </fieldset>
        <fieldset style="max-height: 400px;">
          <legend>Permissions</legend>
          <meld-table name="permissions" [items]="permissions" [(ngModel)]="role.permissions" [menu]="true"
                      itemValuePath="id" style="height: 400px;" [multiSelect]="true">
            <meld-colgroup>
              <meld-col [width]="100"></meld-col>
              <meld-col [width]="100"></meld-col>
              <meld-col [width]="100"></meld-col>
            </meld-colgroup>
            <meld-thead>
              <meld-tr>
                <meld-td><ng-template>Name</ng-template></meld-td>
                <meld-td><ng-template>Path</ng-template></meld-td>
                <meld-td><ng-template>Method</ng-template></meld-td>
              </meld-tr>
            </meld-thead>
            <meld-tbody>
              <meld-tr>
                <meld-td><ng-template let-permission>{{permission.name}}</ng-template></meld-td>
                <meld-td><ng-template let-permission>{{permission.path}}</ng-template></meld-td>
                <meld-td><ng-template let-permission>{{permission.method}}</ng-template></meld-td>
              </meld-tr>
            </meld-tbody>
          </meld-table>
        </fieldset>
      </form>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="onSave()" *ngIf="! role.id">Save</button>
      <button mat-button (click)="onUpdate()" *ngIf="role.id">Update</button>
    </mat-card-actions>
  </mat-card>
</div>
