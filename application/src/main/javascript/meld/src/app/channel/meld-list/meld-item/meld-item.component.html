<div class="card">
  <div class="card-content">
    <div style="display: flex; align-items: center">
      <img class="avatar" [src]="post.avatar.url">
      <strong style="margin-left: 5px;">{{post.name}}</strong>
      <span style="flex-grow: 1"><strong></strong></span>
      <span style="text-align: right;">{{post.time}}</span>
      <button mat-icon-button *ngIf="post.links | meldLink:'read';" (click)="onPostClick()">
        <mat-icon>assignment</mat-icon>
      </button>
    </div>
  </div>

  <div [ngSwitch]="post.type">
    <app-meld-text-item *ngSwitchCase="'text'" [post]="post"></app-meld-text-item>
    <app-meld-image-item *ngSwitchCase="'image'" [post]="post"></app-meld-image-item>
    <app-meld-youtube-item *ngSwitchCase="'youtube'" [post]="post"></app-meld-youtube-item>
  </div>


  <div class="card-content">
    <div style="display: flex;">
      <button mat-icon-button [class.meld-posts-button-active]="plusOneButtonActive()"
              style="margin-right: 10px;" class="meld-posts-button"
              (click)="onPlusOneClick()">
        <mat-icon>plus_one</mat-icon>
      </button>
      <span style="line-height: 40px;">{{post.likes.length}}</span>
      <span style="line-height: 40px; margin-right: 10px; flex-grow: 1;text-align: right;">{{post.comments.length}}</span>
      <button mat-icon-button [class.meld-posts-button-active]="commentsVisible"
              (click)="commentsVisible = ! commentsVisible">
        <mat-icon>comment</mat-icon>
      </button>
    </div>

    <div *ngIf="commentsVisible" style="width: 100%;">
      <hr style="margin-bottom: 10px;"/>

      <div *ngFor="let comment of post.comments">
        <app-meld-comment [comment]="comment"></app-meld-comment>
      </div>

      <hr *ngIf="post.comments.length > 0" style="margin-top: 0"/>

      <div style="display: flex">
        <img class="avatar" [src]="user.avatar.url">
        <app-meld-editor style="border-style: none; flex-grow: 1; line-height: 40px; margin-left: 10px;" [(ngModel)]="comment" name="text"
                         [placeholder]="'Add Comment...'"></app-meld-editor>
      </div>

    </div>
  </div>


  <div class="card-buttons" style="display: flex">
    <button mat-icon-button style="color: dimgrey;">
      <mat-icon>photo_camera</mat-icon>
    </button>
    <div style="flex-grow: 1"></div>
    <button mat-button style="color: dimgrey;" [disabled]="comment.length == 0" (click)="onCommentPost()">
      Post
    </button>
  </div>
</div>
